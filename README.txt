lmuFFB - Le Mans Ultimate Force Feedback
========================================

See README.md for full documentation with images and links.


===============================================================================
!!!                    CRITICAL SAFETY WARNING                             !!!
===============================================================================

BEFORE USING THIS APPLICATION, YOU MUST CONFIGURE YOUR STEERING WHEEL DEVICE 
DRIVER:

This is an EXPERIMENTAL EARLY ALPHA VERSION of a force feedback application. 
The FFB formulas are still being refined and MAY PRODUCE STRONG FORCE SPIKES 
AND OSCILLATIONS that could be dangerous or damage your equipment.

REQUIRED SAFETY STEPS (DO THIS FIRST):

1. BEFORE running LMU and lmuFFB, open your wheelbase/steering wheel device 
   driver configurator (e.g., Simucube TrueDrive, Fanatec Control Panel, 
   Moza Pit House, etc.)

2. Reduce the Maximum FFB Strength/Torque to a LOW value:
   - For Direct Drive Wheelbases: Set to 10% OR LOWER of maximum torque
   - For Belt/Gear-Driven Wheels: Set to 20-30% of maximum strength
   - THIS IS YOUR PRIMARY SAFETY MECHANISM - do not skip this step!

3. Test gradually: Start with even lower values and increase slowly while 
   monitoring for unexpected behavior

4. Stay alert: Be prepared to immediately disable FFB if you experience 
   violent oscillations or unexpected forces

WHY THIS IS CRITICAL:
- The FFB algorithms are under active development and may generate unexpected 
  force spikes
- Unrefined formulas can cause dangerous oscillations, especially on 
  high-torque direct drive systems
- Your safety and equipment protection depend on having a hardware-level 
  force limiter in place

DO NOT SKIP THIS STEP. No software-level safety can replace proper hardware 
configuration.

===============================================================================


IMPORTANT NOTES
---------------

LMU 1.2+ SUPPORT (v0.4.0+):

Full Telemetry Access:
With Le Mans Ultimate 1.2 (released December 9th, 2024), the game now includes 
native shared memory support with complete tire telemetry data. lmuFFB v0.4.0+ 
fully supports LMU 1.2's new interface, providing access to:
- Tire Load - Essential for load-sensitive effects
- Grip Fraction - Enables dynamic understeer/oversteer detection
- Patch Velocities - Allows physics-based texture generation
- Steering Shaft Torque - Direct torque measurement for accurate FFB

No Plugin Required:
Unlike previous versions, LMU 1.2 has built-in shared memory - no external 
plugins needed!

EXPERIMENTAL VERSION - TESTING NEEDED:

This is an experimental release with the new LMU 1.2 interface. The FFB 
formulas may require refinement based on real-world testing.

Please help us improve lmuFFB:
1. Test with caution - Start with low wheel strength settings (see Safety 
   Warning above)
2. Experiment with settings - Try different effect combinations and gains
3. Share your results - Post screenshots of the "Troubleshooting Graphs" 
   window and the main app window to the LMU Forum Thread:
   https://community.lemansultimate.com/index.php?threads/irffb-for-lmu-lmuffb.10440/
4. Report issues - Let us know what works and what doesn't!

Your testing and feedback is greatly appreciated!

rFactor 2 Compatibility:
rFactor 2 is NOT SUPPORTED in v0.4.0+. For rFactor 2, please use earlier 
versions of lmuFFB (v0.3.x). See the releases page for v0.3.x downloads.


STEP-BY-STEP SETUP
------------------

!!! STEP 0: Reduce Wheel Strength FIRST (CRITICAL) !!!

1. BEFORE doing anything else, open your wheel device driver 
   (Simucube TrueDrive, Fanatec Control Panel, Moza Pit House, etc.)

2. Reduce Maximum FFB Strength/Torque:
   - Direct Drive Wheels: Set to 10% or lower
   - Belt/Gear Wheels: Set to 20-30%

3. Save the settings and keep the driver software open for adjustments

A. Configure Le Mans Ultimate (LMU)
   1. Start LMU
   2. Go to Settings > Graphics:
      - Set Display Mode to "Borderless" (Prevents crashes/minimizing)
   
   3. Go to Controls / Bindings
   4. Steering Axis: Bind to your Physical Wheel 
      (e.g., Simucube, Fanatec, Moza, Logitech)

   5. In-Game Force Feedback settings in LMU:
      - FFB Strength: reduce to 0% (Off)
      - Effects: Set "Force Feedback Effects" to Off
      - Smoothing: Set to 0 (Raw) for fastest telemetry updates
      - Advanced: Set Collision Strength and Torque Sensitivity to 0%
      - Tweaks: Disable "Use Constant Steering Force Effect"

B. Configure lmuFFB
   1. Run LMUFFB.exe
   2. FFB Device: Select your Physical Wheel (e.g., "Simucube 2 Pro", "Fanatec DD1")
   3. Master Gain: Start low (0.5) and increase gradually
   4. SOP Effect: Start at 0.0
      - This effect injects lateral G-force
      - On High-Torque wheels (DD), this can cause violent oscillation if too high
   5. Drive! You should feel force feedback generated by the app


TROUBLESHOOTING
---------------

Wheel Jerking / Fighting:
  - You likely have a "Double FFB" conflict
  - Ensure LMU FFB Strength is set to 0% (Off)
  - If the wheel oscillates on straights, reduce SOP Effect to 0.0

Inverted FFB (Force pushes away from center):
  - If the FFB feels "backwards" or "inverted" while driving (wheel pushes 
    away from center instead of pulling toward it), check the "Invert FFB" 
    checkbox in the lmuFFB GUI
  - This reverses the force direction to match your wheel's expected behavior

FFB Too Strong / Dangerous Forces:
  - IMMEDIATELY reduce the maximum FFB strength in your wheel device driver 
    (Simucube TrueDrive, Fanatec Control Panel, Moza Pit House, etc.)
  - Set to 10% or lower for direct drive wheels, 20-30% for belt/gear wheels
  - Do this BEFORE running LMU and lmuFFB again
  - Then adjust the "Gain" slider in lmuFFB to fine-tune

No FFB:
  - Ensure "FFB Device" in lmuFFB is your real wheel
  - Check if Shared Memory is working (console should show "Connected")
  - Verify you're running LMU 1.2 or later (earlier versions don't have 
    native shared memory)

Device Unavailable:
  - If you see "[DI Warning] Device unavailable" in the console, the game 
    may have locked your wheel in Exclusive Mode
  - Try Alt-Tabbing out of the game. If FFB suddenly works when the game 
    is in the background, it confirms the game is interfering
  - Some wheels work better than others with simultaneous access - this is 
    a hardware/driver limitation

"Could not open file mapping object":
  - Start LMU and load a track first
  - The shared memory only activates when driving


KNOWN ISSUES (v0.4.2+)
---------------------

LMU 1.2 MISSING TELEMETRY DATA (CRITICAL):

!!! Expected Warnings on Startup !!!

When you start lmuFFB with LMU 1.2, you will see console warnings like:
- [WARNING] Missing Tire Load data detected
- [WARNING] Missing Grip Fraction data detected

This is EXPECTED and NOT a bug in lmuFFB. This is a BUG IN LMU 1.2 - the game 
is currently returning ZERO (0) for all tire load and grip fraction values, 
even though the shared memory interface includes these fields.

Impact:
- lmuFFB has AUTOMATIC FALLBACK LOGIC that detects this and uses estimated 
  values instead
- FFB will still work, but some effects (like load-sensitive textures and 
  grip-based understeer) will use approximations instead of real data
- You can safely ignore these warnings - they confirm the fallback system 
  is working

What we need from the community:
- PLEASE HELP US REPORT THIS TO THE LMU DEVELOPERS!
- We need to file a bug report / feature request asking them to populate 
  these telemetry fields with actual values
- Forum thread: 
  https://community.lemansultimate.com/index.php?threads/irffb-for-lmu-lmuffb.10440/
- Once LMU fixes this, lmuFFB will automatically use the real data 
  (no code changes needed)

Other Known Issues:
- Telemetry Gaps: Some users report missing telemetry for Dashboard apps 
  (ERS, Temps). lmuFFB has robust fallbacks that prevent dead FFB effects.


FEEDBACK & SUPPORT
------------------
For feedback, questions, or support:
- LMU Forum Thread: 
  https://community.lemansultimate.com/index.php?threads/irffb-for-lmu-lmuffb.10440/
- GitHub Issues: 
  https://github.com/coasting-nc/LMUFFB/issues


For full documentation, advanced settings, and developer information, 
see README.md or visit: https://github.com/coasting-nc/LMUFFB


===============================================================================
RFACTOR 2 SETUP (LEGACY)
===============================================================================

NOTE: rFactor 2 support was removed in v0.4.0. To use lmuFFB with rFactor 2, 
you must download and use version 0.3.x from the releases page:
https://github.com/coasting-nc/LMUFFB/releases
